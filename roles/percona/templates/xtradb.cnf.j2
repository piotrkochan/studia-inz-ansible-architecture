# {{ ansible_managed }}
[mysqld]
socket=/var/lib/mysql/mysql.sock
user={{ percona__mysql_user }}
datadir={{ percona__datadir }}

max_connections={{ percona__max_connections }}
default_storage_engine=InnoDB
character_set_server=utf8
collation_server=utf8_general_ci
skip_name_resolve=1
slow_query_log=0


innodb_strict_mode=on
innodb_autoinc_lock_mode=2

binlog_format=xtradb_binlog_format

wsrep_provider=/usr/lib64/galera3/libgalera_smm.so
wsrep_node_address={{ percona__bind_address }}
wsrep_node_name={{ ansible_hostname }}
wsrep_cluster_name={{ percona__cluster_name }}
wsrep_cluster_address={{ percona__wsrep_cluster_address }}

wsrep_sst_method=xtrabackup-v2
wsrep_sst_auth={{ percona__sst_user }}:{{ percona__sst_password }}

# Set ENFORCING to block the use of experimental and unsupported features in Percona XtraDB Cluster
pxc_strict_mode=ENFORCING
